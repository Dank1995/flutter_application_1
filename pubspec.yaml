workflows:
  android-release:
    name: Android Release
    environment:
      flutter: stable
    scripts:
      - name: Build Android release
        script: |
          flutter build apk --release \
            --flavor android-production \
            -t lib/main_prod.dart
    artifacts:
      - build/app/outputs/flutter-apk/*.apk

  ios-release:
    name: iOS Release
    environment:
      flutter: stable
      xcode: latest
    scripts:
      - name: Build iOS release
        script: |
          flutter build ipa --release \
            --flavor ios-production \
            -t lib/main_prod.dart
    artifacts:
      - build/ios/ipa/*.ipa
      - build/ios/ipa/*.dSYM.zip
    publishing:
      app_store_connect:
        api_key: Encrypted(â€¦)   # replace with your App Store Connect API key

  web-release:
    name: Web Release
    environment:
      flutter: stable
    scripts:
      - name: Build Web release
        script: |
          flutter build web --release
    artifacts:
      - build/web/**

